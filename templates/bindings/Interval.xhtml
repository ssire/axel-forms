<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:xt="http://ns.inria.org/xtiger" xml:lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <title>The 'interval' binding</title>
  
  <xt:head version="1.1" templateVersion="1.0" label="TestCase">
  </xt:head>

  <style type="text/css">
    p.explic {
      font-size: 90%;
    }
    .avertissement {
      color: green;
    }
  </style>
  
  <!-- SELF-TRANSFORMED template -->
  <!-- because 'date' sub-type only available when jQuery is inside the same window -->
  <link href="../../../axel/axel/axel.css" rel="stylesheet" type="text/css"></link>
  <script src="../../../axel/3rd-part/jquery/js/jquery-3.4.1.min.js">//</script>
  <script src="../../../axel/axel/axel.js">//</script>
  <script src="../../src/plugins/date.js">//</script>
  <script data-bundles-path="../../../axel/axel/bundles" src="../../dist/axel-forms.js">//</script>

  <!-- 3rd party dependencies -->
  <link rel="stylesheet" type="text/css"
        href="../../../axel/3rd-part/jquery/css/ui-lightness/jquery-ui-1.10.4.custom.min.css"  charset="utf-8" />
  <script type="text/javascript" src="../../../axel/3rd-part/jquery/js/jquery-ui-1.10.4.custom.min.js"></script>

  <!-- template enrichment : extracts and generates xt:attribute and xt:use sample code -->
  <link rel="stylesheet" type="text/css" href="../../../axel/templates/shared/demo.css" />
  <script type="text/javascript" charset="utf-8" src="../../../axel/templates/shared/demo.js"></script>
</head>
<body data-template="#">
  
  <h1>The 'interval' binding</h1>
  
  <p><b>Goal</b> : turn two independent "date" fields into an interval selection so that you can only select a valid interval.</p>

  <p><b>Declaration</b> :</p>
  
  <ul>
    <li>Common ancestor's host : <code>data-binding="interval"</code>, <code>data-variable="<i>name</i>"</code></li>
    <li>Target hosts : <code>data-min-date="<i>name</i>"</code> and <code>data-max-date="<i>name</i>"</code></li>
  </ul>
  
  <h2>In combination with the <code>date</code> filter of the <code>text</code> plugin</h2> 
  
  <h3>Single usage</h3>
  
  <p>The common ancestor's host is outside of any <code>xt:repeat</code>.</p>

  <div class="demo extract" data-binding="interval" data-variable="event">
    <span data-min-date="event">
      The interval starts from <xt:use types="text" param="filter=date;" label="Start"/>
    </span> and
    <span data-max-date="event">
      ends before <xt:use types="text" param="filter=date;" label="End"/>
    </span>
  </div>

  <h3>Usage in a <code>xt:repeat</code></h3>
  
  <p>The common ancestor's host MUST be within the same repeated slice to work. <i>Not fully implemented yet : we need to trigger binding installation within a slice after repetition.</i></p>

  <div class="demo extract">
    <xt:repeat minOccurs="1" maxOccurs="*" label="Intervals">
      <div>
        <p data-binding="interval" data-variable="event">
          <xt:menu-marker/>
          <span data-min-date="event">
            The interval starts from <xt:use types="text" param="filter=date;" label="Start"/>
          </span> and
          <span data-max-date="event">
            ends before <xt:use types="text" param="filter=date;" label="End"/>
          </span>
        </p>
      </div>
    </xt:repeat>
  </div>

  <h2>In combination with the <code>date</code> sub-type of the <code>input</code> plugin</h2> 
  
  <h3>Single usage</h3>
  
  <p>The common ancestor's host is outside of any <code>xt:repeat</code>.</p>

  <div class="demo extract" data-binding="interval" data-variable="event2">
    <span id="demo" data-min-date="event2">
      The interval starts from <xt:use types="input" param="type=date;filter=event;class=date" label="Start"/>
    </span> and
    <span data-max-date="event2">
      ends before <xt:use types="input" param="type=date;filter=event" label="End"/>
    </span>
  </div>
  
  <h3>Usage in a <code>xt:repeat</code></h3>
  
  <p>The common ancestor's host MUST be within the same repeated slice to work. <i>Not fully implemented yet : we need to trigger binding installation within a slice after repetition.</i></p>

  <div class="demo extract">
    <xt:repeat minOccurs="1" maxOccurs="*" label="Intervals">
      <div>
        <p data-binding="interval" data-variable="event2">
          <xt:menu-marker/>
          <span data-min-date="event2">
            The interval starts from <xt:use types="input" param="type=date" label="Start"/>
          </span> and
          <span data-max-date="event2">
            ends before <xt:use types="input" param="type=date;" label="End"/>
          </span>
        </p>
      </div>
    </xt:repeat>
  </div>  
</body> 
</html>
